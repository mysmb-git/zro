name: "CI templates"
description: "CI description"
author: "CI author"
icon: ""
thumbnail: ""

requiredCredentials:
  - aws
  - circleci
  - github

# Template variables to populate, these could be overwritten by the file spefic frontmatter variables
template:
  # strictMode: true # will only parse files that includes the .tmpl.* extension, otherwise it will copy file
  delimiters:
    - "<%"
    - "%>"
  inputDir: 'templates'
  outputDir: ".circleci"

# required context parameters: will throw a warning message at the end if any of the context parameters are not present
# contextRequired:
#   - cognitoPoolID
#   - cognitoClientID

# parameters required from user to populate the template params
parameters:
  - field: platform
    label: CI Platform
    # default: github
    options:
      - github
      - circlci
  - field: circleci_api_key
    label: "Circle CI API Key to setup your CI/CD for repositories"
    conditions:
    - action: KeyMatchCondition
      matchField: platform
      whenValue: "circlci"
  - field: useExistingAwsProfile
    label: "Use credentials from an existing AWS profile?"
    options:
      - "yes"
      - "no"
    omitFromProjectFile: yes
  - field: awsCredentials
    label: "Tell me your password"
    conditions:
    - action: KeyMatchCondition
      whenValue: "no"
      matchField: useExistingAwsProfile
    - action: KeyMatchCondition
      whenValue: "some extra condition"
      matchField: foo
